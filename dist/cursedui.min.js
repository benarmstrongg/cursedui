const e=window,n={},t={};function o(){for(const o in n)if(o in e&&o in t&&e[o]!==t[o]){const r=n[o];t[o]=e[o],r.render&&r.render(),r.rerender()}requestAnimationFrame(o)}e.cre=document.body,e.component=function(o){const r=document.createElement(o.name||e.component.caller?.name||"component");e.cre.append(r),e.cre=r,r.id=Math.ceil(1e5*Math.random());let c=r,d=r,m=0,s=0;n[r.id]=[];const i=Object.keys(e);o((function e(n,t){const o="function"==typeof n,i=o?n.name||"nestedcomponent":n,a=`${i}-${m}-${s}-${t.toString()}`;let u=e.subcomponents?.get(a);return o&&!u&&(u=n(),e.subcomponents??=new Map,e.subcomponents.set(a,u)),u??=document.createElement(i),m++,u.render=()=>e(i,t),m>s?(c.append(u),c=u):m===s&&(c=d.parentElement,c.append(u)),s=m,d=u,t(u),m--,0===m&&(s=0,d=r,c=r),u}));const a=Object.keys(e).filter((e=>!i.includes(e)));for(const o of a)n[o]||(n[o]=r,n[r.id].push(o),t[o]=e[o]);return r.rerender=()=>{const n=[...r.children||[]];e.cre=r;for(const e of n)e.rerender?(e.remove(),e.rerender()):e.render&&(e.remove(),e.render());e.cre=document.body},e.cre=document.body,r},requestAnimationFrame(o);
